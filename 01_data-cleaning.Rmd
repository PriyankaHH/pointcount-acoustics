---
title: "R Notebook"
output: html_notebook
---

#Loading packages

```{r}
library (tidyverse)
library (vegan)

```

#Getting the common name for all 120 species, with habitat (rainforest/open-country) and habit (canopy, mid-storey, ground, understorey, aquatic, aerial)
```{r}
species_names <- read.csv("C:/Users/Priyanka H/OneDrive - University of Florida/Chapter 1/pointcount-acoustics/data/species-trait-dat.csv") %>%
  rename ("Species" = common_name)
```

#Preparing point-count data, with abundance data (0 to n) for 69 sites arosss visits, to use for an NMDS plot. Wide data.
```{r}
pointcount_data <- read.csv ("C:/Users/Priyanka H/OneDrive - University of Florida/Chapter 1/pointcount-acoustics/data/filt_data.csv") %>%
  select (Site_ID, Site_type, Species, Number) %>%
  mutate (Site_ID = str_replace_all (Site_ID, "_", "")) %>%
  mutate (Site_type = str_replace_all (Site_type, "AR", "Restored")) %>%
  mutate (Site_type = str_replace_all (Site_type, "NR", "Unrestored")) %>%
  mutate (Site_type = str_replace_all (Site_type, "BM", "Benchmark")) %>%
  group_by (Species, Site_ID, Site_type) %>% 
  summarise (Number=sum(Number)) %>% 
  arrange(Site_type) %>%
  pivot_wider (names_from = Species, values_from = Number, values_fill = list(Number=0))
```

#Preparing annotated acoustic data, with detection data (from 0 to n) for 43 sites, to use for an NMDS plot. Wide data.
```{r}
acoustic_data <- read.csv ("C:/Users/Priyanka H/OneDrive - University of Florida/Coursework/Multivariate Stats/Data/vocal-detections-data.csv") %>%
  select (Date, Site, Restoration.type, 7:128) %>%
  pivot_longer(cols=IP:HSWP, names_to = "Species", values_to = "vocalDetections") %>%
  rename ("Site_ID" = Site, "Site_type" = Restoration.type, "species_annotation_codes" = Species) %>%
  replace(is.na(.), 0) %>%
  left_join(species_names) %>%
  select (-7, -4) %>%
  mutate (Site_type = str_replace_all (Site_type, "AR", "Restored")) %>%
  mutate (Site_type = str_replace_all (Site_type, "NR", "Unrestored")) %>%
  mutate (Site_type = str_replace_all (Site_type, "BM", "Benchmark")) %>%
  group_by (Species, Site_ID, Site_type) %>% 
  summarise (vocalDetections=sum(vocalDetections)) %>% 
  arrange(Site_type) %>%
  pivot_wider (names_from = Species, values_from = vocalDetections, values_fill = list(vocalDetections=0))
```

#Adding the two dataframes together, with 0s in the point count data for absent species
```{r}

```


#Converting the dataframes to matrices to make an NMDS plot
```{r}
pointcount_data <- as.matrix (pointcount_data [, 3:ncol(pointcount_data)])
acoustic_data <- as.matrix (acoustic_data [, 3:ncol(acoustic_data)])

```
